{"version":3,"sources":["webpack://kekstagram/./src/const.js","webpack://kekstagram/./src/api.js","webpack://kekstagram/./src/utils/common.js","webpack://kekstagram/./src/utils/DOM.js","webpack://kekstagram/./src/gallery/big-picture.js","webpack://kekstagram/./src/gallery/render-pictures.js","webpack://kekstagram/./src/gallery/gallery.js","webpack://kekstagram/./src/editor/slider.js","webpack://kekstagram/./src/editor/validation.js","webpack://kekstagram/./src/editor/zoom.js","webpack://kekstagram/./src/utils/notification/success.js","webpack://kekstagram/./src/utils/notification/error.js","webpack://kekstagram/./src/editor/editor.js","webpack://kekstagram/./src/editor/file-chooser.js","webpack://kekstagram/./src/main.js"],"names":["EffectName","sliderSetting","chrome","range","max","min","start","step","sepia","marvin","phobos","heat","END_POINT","checkStatus","response","status","Error","statusText","toJSON","json","getRandomInteger","lower","Math","ceil","upper","floor","random","isEscEvent","keycode","sortByDiscussed","firstPost","secondPost","comments","length","bodyElement","document","querySelector","DOM","classList","add","remove","element","renderedCommentCount","pictureSectionElement","imageElement","socialCaptionElement","likeCounterElement","commentListElement","closeButtonElement","commentCounterElement","loadMoreButtonElement","escPressHandler","evt","keyCode","closeButtonClickHandler","hideBigPicture","loadMoreButtonClickHandler","preventDefault","commentCount","renderTo","renderComments","removeLoadMoreButton","updateCommentCounter","removeEventListener","from","to","commentListFragment","createDocumentFragment","slice","forEach","comment","appendChild","commentContainerElement","content","cloneNode","avatarElement","textElement","src","avatar","alt","name","textContent","message","createComment","totalComments","addContentToBigPicture","data","url","description","likes","innerHTML","addEventListener","addComments","pictureTemplate","pictureClickHandler","picture","createPicture","pictureElement","bind","renderPictures","pictures","pictureListFragment","pictureListElement","querySelectorAll","filterElement","formElement","currentSortType","photosFormServer","newSortType","target","id","items","shuffledItems","index","randomIndex","swap","getRandomElement","sort","sliderElement","scaleElement","filterContainerElement","SliderEffect","style","filter","value","currentEffectName","setClassNameForPicture","effectName","className","destroySlider","noUiSlider","destroy","filterChangeHandler","setDefaultFilter","updateOptions","window","create","Object","assign","connect","createSlider","on","values","handle","hashtagElement","commentElement","submitElement","hashtagRegexp","RegExp","hashtagInputHandler","input","hashtags","split","setCustomValidity","Set","size","hashtag","test","isHashtags","reportValidity","disabled","commentInputHandler","maxLength","isMaxLength","minusButtonElement","plusButtonElement","photoElement","minusButtonClickHandler","scaleValue","parseInt","width","plusButtonClickHandler","mainElement","successTemplate","successElement","closeSuccessNotification","nextButtonHandler","errorTemplate","errorElement","closeErrorNotification","editorElement","hideEditor","successHandler","successNotification","showSuccess","errorHandler","errorNotification","closeButton","showError","formSubmitHandler","post","FormData","fetch","method","body","then","catch","FILE_TYPES","fileChooserElement","previewElement","file","files","fileName","toLowerCase","some","fileType","endsWith","reader","FileReader","result","readAsDataURL","err"],"mappings":"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","file":"bundle.js","sourcesContent":["export const EffectName = {\n  NONE: 'none',\n  CHROME: 'chrome',\n  SEPIA: 'sepia',\n  MARVIN: 'marvin',\n  PHOBOS: 'phobos',\n  HEAT: 'heat',\n};\n\nexport const sliderSetting = {\n  chrome: {\n    range: {\n      max: 1,\n      min: 0,\n    },\n    start: 0.8,\n    step: 0.1,\n  },\n  sepia: {\n    range: {\n      max: 1,\n      min: 0,\n    },\n    start: 0.8,\n    step: 0.1,\n  },\n  marvin: {\n    range: {\n      max: 100,\n      min: 0,\n    },\n    start: 80,\n    step: 1,\n  },\n  phobos: {\n    range: {\n      max: 3,\n      min: 0,\n    },\n    start: 2.4,\n    step: 0.1,\n  },\n  heat: {\n    range: {\n      max: 3,\n      min: 1,\n    },\n    start: 2.6,\n    step: 0.1,\n  },\n};\n\nexport const SortType = {\n  DEFAULT: 'filter-default',\n  RANDOM: 'filter-random',\n  DISCUSSED: 'filter-discussed',\n};\n\nexport const SuccessHTTPSStatusRange = {\n  MIN: 200,\n  MAX: 299,\n};\n\nexport const ZoomVariables = {\n  MIN: 25,\n  MAX: 100,\n  STEP: 25,\n};\n","import {SuccessHTTPSStatusRange} from './const.js';\n\nconst END_POINT = 'https://23.javascript.pages.academy/kekstagram';\n\nconst checkStatus = (response) => {\n  if (\n    response.status < SuccessHTTPSStatusRange.MIN ||\n    response.status > SuccessHTTPSStatusRange.MAX\n  ) {\n    throw new Error(`Статус ответа ${response.status}: ${response.statusText}`);\n  }\n\n  return response;\n};\n\nconst catchError = (err) => {\n  throw err;\n};\n\nconst toJSON = (response) => response.json();\n\nexport const getPosts = () => fetch(`${END_POINT}/data`)\n  .then(checkStatus)\n  .catch(catchError)\n  .then(toJSON);\n\nexport const addPost = (post) => fetch(END_POINT, {method: 'POST', body: post})\n  .then(checkStatus)\n  .then(toJSON);\n","const DEBOUNCE_INTERVAL = 500;\nconst ESC_KEYCODE = 27;\n\nexport const debounce = (callback, delay = DEBOUNCE_INTERVAL) => {\n  let timeout;\n\n  return (...args) => {\n    const later = () => {\n      callback(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, delay);\n  };\n};\n\nconst getRandomInteger = (min = 0, max = 1) => {\n  const lower = Math.ceil(Math.min(min, max));\n  const upper = Math.floor(Math.max(min, max));\n\n  return Math.floor(lower + Math.random() * (upper - lower + 1));\n};\n\nexport const getRandomElement = (items) => {\n  const shuffledItems = [...items];\n\n  for (let index = shuffledItems.length - 1; index > 0; index--) {\n    const randomIndex = getRandomInteger(0, index);\n    const swap = shuffledItems[index];\n    shuffledItems[index] = shuffledItems[randomIndex];\n    shuffledItems[randomIndex] = swap;\n  }\n\n  return shuffledItems;\n};\n\nexport const isEscEvent = (keycode) => keycode === ESC_KEYCODE;\n\nexport const sortByDiscussed = (firstPost, secondPost) => secondPost.comments.length - firstPost.comments.length;\n","const bodyElement = document.querySelector('body');\n\nexport const DOM = {\n  lockScroll: () => bodyElement.classList.add('scroll-lock'),\n  unlockScroll: () => bodyElement.classList.remove('scroll-lock'),\n  hideElement: (element) => element.classList.add('hidden'),\n  showElement: (element) => element.classList.remove('hidden'),\n  removeElement: (element) => element.remove(),\n};\n","import {isEscEvent} from '../utils/common.js';\nimport {DOM} from '../utils/DOM.js';\n\nconst COMMENT_COUNT_PER_STEP = 5;\nlet renderedCommentCount = COMMENT_COUNT_PER_STEP;\nlet comments = [];\n\nconst bodyElement = document.querySelector('body');\nconst pictureSectionElement = bodyElement.querySelector('.big-picture');\nconst imageElement = pictureSectionElement.querySelector('.big-picture__img img');\nconst socialCaptionElement = pictureSectionElement.querySelector('.social__caption');\nconst likeCounterElement = pictureSectionElement.querySelector('.likes-count');\nconst commentListElement = pictureSectionElement.querySelector('.social__comments');\nconst closeButtonElement = pictureSectionElement.querySelector('.big-picture__cancel');\nconst commentCounterElement = pictureSectionElement.querySelector('.social__comment-count');\nconst loadMoreButtonElement = pictureSectionElement.querySelector('.social__comments-loader');\n\nconst escPressHandler = (evt) => {\n  if (isEscEvent(evt.keyCode)) {\n    closeButtonClickHandler(); // eslint-disable-line no-use-before-define\n  }\n};\n\nconst closeButtonClickHandler = () => {\n  hideBigPicture(); // eslint-disable-line no-use-before-define\n};\n\nconst loadMoreButtonClickHandler = (evt) => {\n  evt.preventDefault();\n\n  const commentCount = comments.length;\n  const renderTo = Math.min(commentCount, renderedCommentCount + COMMENT_COUNT_PER_STEP);\n\n  renderComments(renderedCommentCount, renderTo); // eslint-disable-line no-use-before-define\n\n  renderedCommentCount = renderTo;\n\n  if (commentCount <= renderedCommentCount) {\n    removeLoadMoreButton(); // eslint-disable-line no-use-before-define\n  }\n\n  updateCommentCounter(); // eslint-disable-line no-use-before-define\n};\n\nconst hideBigPicture = () => {\n  DOM.unlockScroll();\n  DOM.hideElement(pictureSectionElement);\n  loadMoreButtonElement.removeEventListener('click', loadMoreButtonClickHandler);\n  closeButtonElement.removeEventListener('click', closeButtonClickHandler);\n  document.removeEventListener('keydown', escPressHandler);\n};\n\nconst openBigPicture = () => {\n  DOM.lockScroll();\n  DOM.showElement(pictureSectionElement);\n  closeButtonElement.addEventListener('click', closeButtonClickHandler);\n  document.addEventListener('keydown', escPressHandler);\n};\n\nconst createComment = (comment) => {\n  const commentTemplate = document.querySelector('#comment')\n    .content\n    .querySelector('.social__comment');\n\n  const commentContainerElement = commentTemplate.cloneNode(true);\n  const avatarElement = commentContainerElement.querySelector('.social__picture');\n  const textElement = commentContainerElement.querySelector('.social__text');\n\n  avatarElement.src = comment.avatar;\n  avatarElement.alt = comment.name;\n  textElement.textContent = comment.message;\n\n  return commentContainerElement;\n};\n\nconst renderComments = (from, to) => {\n  const commentListFragment = document.createDocumentFragment();\n\n  comments\n    .slice(from, to)\n    .forEach((comment) => commentListFragment.appendChild(createComment(comment)));\n\n  commentListElement.appendChild(commentListFragment);\n};\n\nconst removeComments = () => commentListElement.innerHTML = '';\n\nconst updateCommentCounter = () => {\n  const totalComments = comments.length;\n  commentCounterElement.textContent = `${renderedCommentCount} из ${totalComments} комментариев`;\n};\n\nconst removeLoadMoreButton = () => {\n  DOM.hideElement(loadMoreButtonElement);\n  loadMoreButtonElement.removeEventListener('click', loadMoreButtonClickHandler);\n};\n\nconst addComments = () => {\n  const commentCount = comments.length;\n\n  removeComments();\n  renderComments(0, COMMENT_COUNT_PER_STEP);\n\n  if (commentCount > COMMENT_COUNT_PER_STEP) {\n    renderedCommentCount = COMMENT_COUNT_PER_STEP;\n    DOM.showElement(loadMoreButtonElement);\n    loadMoreButtonElement.addEventListener('click', loadMoreButtonClickHandler);\n  } else {\n    renderedCommentCount = commentCount;\n    removeLoadMoreButton();\n  }\n\n  updateCommentCounter();\n};\n\nexport const addContentToBigPicture = (data) => {\n  comments = [...data.comments];\n\n  imageElement.src = data.url;\n  socialCaptionElement.textContent = data.description;\n  likeCounterElement.textContent = data.likes;\n\n  addComments();\n  openBigPicture();\n};\n","import {addContentToBigPicture} from './big-picture.js';\nimport {DOM} from '../utils/DOM.js';\n\nconst pictureTemplate = document.querySelector('#picture')\n  .content\n  .querySelector('.picture');\n\nconst pictureClickHandler = (picture) => {\n  addContentToBigPicture(picture);\n};\n\nconst createPicture = (picture) => {\n  const pictureElement = pictureTemplate.cloneNode(true);\n\n  pictureElement.querySelector('.picture__img').src = picture.url;\n  pictureElement.querySelector('.picture__likes').textContent = picture.likes;\n  pictureElement.querySelector('.picture__comments').textContent = picture.comments.length;\n\n  pictureElement.addEventListener('click', pictureClickHandler.bind(null, picture));\n\n  return pictureElement;\n};\n\nconst clearPictureList = () => {\n  const pictureElements = document.querySelectorAll('.picture');\n  pictureElements.forEach(DOM.removeElement);\n};\n\nexport const renderPictures = (pictures) => {\n  const pictureListFragment = document.createDocumentFragment();\n  const pictureListElement = document.querySelector('.pictures');\n\n  clearPictureList();\n  pictures.forEach((picture) => pictureListFragment.appendChild(createPicture(picture)));\n\n  pictureListElement.appendChild(pictureListFragment);\n};\n","import {renderPictures} from './render-pictures.js';\nimport {getRandomElement, sortByDiscussed} from '../utils/common.js';\nimport {SortType} from '../const.js';\n\nconst filterElement = document.querySelector('.img-filters');\nconst formElement = filterElement.querySelector('.img-filters__form');\nlet currentSortType = SortType.DEFAULT;\nlet photosFormServer = [];\n\nconst formItemClickHandler = (evt) => {\n  evt.preventDefault();\n\n  const newSortType = evt.target.id;\n\n  if (newSortType === currentSortType) {\n    return;\n  }\n\n  formElement\n    .querySelector(`#${currentSortType}`)\n    .classList.remove('img-filters__button--active');\n\n  formElement\n    .querySelector(`#${newSortType}`)\n    .classList.add('img-filters__button--active');\n\n  currentSortType = newSortType;\n\n  switch (currentSortType) {\n    case SortType.RANDOM:\n      renderPictures(getRandomElement(photosFormServer, 10));\n      break;\n    case SortType.DISCUSSED:\n      renderPictures(photosFormServer.slice().sort(sortByDiscussed));\n      break;\n    default:\n      renderPictures(photosFormServer);\n      break;\n  }\n};\n\nformElement.addEventListener('click', formItemClickHandler);\n\nexport const renderPhotos = (data) => {\n  photosFormServer = data;\n  filterElement.classList.remove('img-filters--inactive');\n  renderPictures(photosFormServer);\n};\n","import {DOM} from '../utils/DOM.js';\nimport {EffectName, sliderSetting} from '../const.js';\n\nconst formElement = document.querySelector('.img-upload__form');\nconst pictureElement = formElement.querySelector('.img-upload__preview img');\nconst sliderElement = formElement.querySelector('.effect-level__slider');\nconst scaleElement = formElement.querySelector('.img-upload__effect-level');\nconst filterContainerElement = formElement.querySelector('.effects__list');\n\nconst SliderEffect = {\n  [EffectName.NONE]: () => pictureElement.style.filter = 'none',\n  [EffectName.CHROME]: (value) => pictureElement.style.filter = `grayscale(${value})`,\n  [EffectName.SEPIA]: (value) => pictureElement.style.filter = `sepia(${value})`,\n  [EffectName.MARVIN]: (value) => pictureElement.style.filter = `invert(${value}%)`,\n  [EffectName.PHOBOS]: (value) => pictureElement.style.filter = `blur(${value}px)`,\n  [EffectName.HEAT]: (value) => pictureElement.style.filter = `brightness(${value})`,\n};\n\nconst FILTER_CLASS_PREFIX = 'effects__preview--';\nlet currentEffectName = EffectName.NONE;\n\nconst setClassNameForPicture = (effectName) => {\n  pictureElement.className = '';\n  pictureElement.classList.add(`${FILTER_CLASS_PREFIX}${effectName}`);\n};\n\nconst createSlider = (effectName) => {\n  window.noUiSlider.create(\n    sliderElement,\n    Object.assign(\n      {},\n      sliderSetting[effectName],\n      {connect: 'lower'},\n    ),\n  );\n\n  DOM.showElement(scaleElement);\n};\n\nconst updateSlider = (effectName) => {\n  sliderElement.noUiSlider.updateOptions(sliderSetting[effectName]);\n};\n\nconst destroySlider = () => {\n  if (sliderElement.noUiSlider) {\n    sliderElement.noUiSlider.destroy();\n  }\n};\n\nconst filterChangeHandler = (evt) => {\n  currentEffectName = evt.target.value;\n  setClassNameForPicture(currentEffectName);\n\n  if (currentEffectName === EffectName.NONE) {\n    setDefaultFilter(); // eslint-disable-line no-use-before-define\n    destroySlider();\n    return;\n  }\n\n  if (sliderElement.noUiSlider) {\n    updateSlider(currentEffectName);\n    return;\n  }\n\n  createSlider(currentEffectName);\n\n  sliderElement.noUiSlider.on('update', (values, handle) => {\n    const value = values[handle];\n    SliderEffect[currentEffectName](value);\n  });\n};\n\nexport const setFilterListener = () => {\n  filterContainerElement.addEventListener('change', filterChangeHandler);\n};\n\nexport const removeFilterListener = () => {\n  filterContainerElement.removeEventListener('change', filterChangeHandler);\n};\n\nexport const setDefaultFilter = () => {\n  SliderEffect[EffectName.NONE]();\n  setClassNameForPicture(EffectName.NONE);\n  DOM.hideElement(scaleElement);\n  destroySlider();\n};\n","const formElement = document.querySelector('.img-upload__form');\nconst hashtagElement = formElement.querySelector('.text__hashtags');\nconst commentElement = formElement.querySelector('.text__description');\nconst submitElement = formElement.querySelector('.img-upload__submit');\n\nconst MIN_HASHTAG_LENGTH = 2;\nconst MAX_HASHTAG_LENGTH = 20;\nconst MAX_HASHTAG_COUNT = 5;\nconst MAX_COMMENT_LENGTH = 140;\nconst hashtagRegexp = new RegExp('^#[A-Za-zА-Яа-я0-9]{1,19}$');\n\nconst isHashtags = (input) => {\n  const hashtags = input.value.split(' ');\n\n  if (hashtags.length > MAX_HASHTAG_COUNT) {\n    input.setCustomValidity(`Максимальное количество хэш-тегов — ${MAX_HASHTAG_COUNT}`);\n    return false;\n  }\n\n  if (new Set(hashtags).size !== hashtags.length) {\n    input.setCustomValidity('Хэштеги должны быть уникальными');\n    return false;\n  }\n\n  for (const hashtag of hashtags) {\n    if (hashtag === '') {\n      input.setCustomValidity('Хэштеги разделяются пробелами');\n      return false;\n    }\n\n    if (hashtag[0] !== '#') {\n      input.setCustomValidity('Хэштег должен начинаться с #');\n      return false;\n    }\n\n    if (hashtag.length < MIN_HASHTAG_LENGTH) {\n      input.setCustomValidity(`Минимальная длинна хэш-тега ${MIN_HASHTAG_LENGTH} символа`);\n      return false;\n    }\n\n    if (hashtag.length > MAX_HASHTAG_LENGTH) {\n      input.setCustomValidity(`Максимальная длинна хэш-тега ${MAX_HASHTAG_LENGTH} символа`);\n      return false;\n    }\n\n    if (!hashtagRegexp.test(hashtag)) {\n      input.setCustomValidity('Строка после # не может содержать спецсимволов');\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst isMaxLength = (input, maxLength) => {\n  const inputLength = input.value.length;\n\n  if (inputLength > maxLength) {\n    input.setCustomValidity(`Максимальное количество символов — ${maxLength}`);\n    return true;\n  }\n\n  return false;\n};\n\nconst hashtagInputHandler = (evt) => {\n  const input = evt.target;\n\n  if (!isHashtags(input)) {\n    input.reportValidity();\n    submitElement.disabled = true;\n    return;\n  }\n\n  input.setCustomValidity('');\n  submitElement.disabled = false;\n};\n\nconst commentInputHandler = (evt) => {\n  const input = evt.target;\n\n  if (isMaxLength(input, MAX_COMMENT_LENGTH)) {\n    input.reportValidity();\n    submitElement.disabled = true;\n    return;\n  }\n\n  input.setCustomValidity('');\n  submitElement.disabled = false;\n};\n\nexport const setInputListeners = () => {\n  hashtagElement.addEventListener('input', hashtagInputHandler);\n  commentElement.addEventListener('input', commentInputHandler);\n};\n\nexport const removeInputListeners = () => {\n  hashtagElement.removeEventListener('input', hashtagInputHandler);\n  commentElement.removeEventListener('input', commentInputHandler);\n};\n\nexport const clearInputs = () => {\n  hashtagElement.textContent = '';\n  commentElement.textContent = '';\n};\n","import {ZoomVariables} from '../const.js';\n\nconst DEFAULT_SCALE_VALUE = 100;\n\nconst formElement = document.querySelector('.img-upload__form');\nconst minusButtonElement = formElement.querySelector('.scale__control--smaller');\nconst plusButtonElement = formElement.querySelector('.scale__control--bigger');\nconst scaleElement = formElement.querySelector('.scale__control--value');\nconst photoElement = formElement.querySelector('.img-upload__preview img');\n\nconst minusButtonClickHandler = () => {\n  let scaleValue = parseInt(scaleElement.value, 10);\n\n  if (scaleValue > ZoomVariables.MIN) {\n    scaleValue -= ZoomVariables.STEP;\n    photoElement.style.width = `${scaleValue}%`;\n    scaleElement.value = `${scaleValue}%`;\n  }\n};\n\nconst plusButtonClickHandler = () => {\n  let scaleValue = parseInt(scaleElement.value, 10);\n\n  if (scaleValue < ZoomVariables.MAX) {\n    scaleValue += ZoomVariables.STEP;\n    photoElement.style.width = `${scaleValue}%`;\n    scaleElement.value = `${scaleValue}%`;\n  }\n};\n\nexport const setZoomListeners = () => {\n  minusButtonElement.addEventListener('click', minusButtonClickHandler);\n  plusButtonElement.addEventListener('click', plusButtonClickHandler);\n};\n\nexport const removeZoomListeners = () => {\n  minusButtonElement.removeEventListener('click', minusButtonClickHandler);\n  plusButtonElement.removeEventListener('click', plusButtonClickHandler);\n};\n\nexport const setDefaultZoomValue = () => {\n  photoElement.style.width = `${DEFAULT_SCALE_VALUE}%`;\n  scaleElement.value = `${DEFAULT_SCALE_VALUE}%`;\n};\n","import {isEscEvent} from '../common.js';\nimport {DOM} from '../DOM.js';\n\nconst mainElement = document.querySelector('main');\nconst successTemplate = document.querySelector('#success').content.querySelector('.success');\nlet successElement = null;\n\nconst escPressHandler = (evt) => {\n  if (isEscEvent(evt.keyCode)) {\n    closeSuccessNotification(); // eslint-disable-line no-use-before-define\n  }\n};\n\nconst nextButtonHandler = (evt) => {\n  evt.preventDefault();\n  closeSuccessNotification(); // eslint-disable-line no-use-before-define\n};\n\nconst closeSuccessNotification = () => {\n  DOM.removeElement(successElement);\n  DOM.unlockScroll();\n  document.removeEventListener('keydown', escPressHandler);\n};\n\nconst createSuccessNotification = () => {\n  successElement = successTemplate.cloneNode(true);\n  const nextButtonElement = successElement.querySelector('.success__button');\n\n  nextButtonElement.addEventListener('click', nextButtonHandler);\n  document.addEventListener('keydown', escPressHandler);\n\n  return successElement;\n};\n\nexport const showSuccess = () => {\n  const successNotification = createSuccessNotification();\n  mainElement.appendChild(successNotification);\n};\n","import {isEscEvent} from '../common.js';\nimport {DOM} from '../DOM.js';\n\nconst mainElement = document.querySelector('main');\nconst errorTemplate = document.querySelector('#error').content.querySelector('.error');\nlet errorElement = null;\n\nconst escPressHandler = (evt) => {\n  if (isEscEvent(evt.keyCode)) {\n    closeErrorNotification(); // eslint-disable-line no-use-before-define\n  }\n};\n\nconst closeButtonClickHandler = (evt) => {\n  evt.preventDefault();\n  closeErrorNotification(); // eslint-disable-line no-use-before-define\n};\n\nconst closeErrorNotification = () => {\n  DOM.removeElement(errorElement);\n  DOM.unlockScroll();\n  document.removeEventListener('keydown', escPressHandler);\n};\n\nconst createErrorNotification = () => {\n  errorElement = errorTemplate.cloneNode(true);\n  const closeButtons = errorElement.querySelectorAll('.error__button');\n\n  closeButtons.forEach((closeButton) => closeButton.addEventListener('click', closeButtonClickHandler));\n  document.addEventListener('keydown', escPressHandler);\n\n  return errorElement;\n};\n\nexport const showError = () => {\n  const errorNotification = createErrorNotification();\n  mainElement.appendChild(errorNotification);\n};\n","import {addPost} from '../api.js';\nimport {setDefaultFilter, setFilterListener, removeFilterListener} from './slider.js';\nimport {clearInputs, setInputListeners, removeInputListeners} from './validation.js';\nimport {setDefaultZoomValue, setZoomListeners, removeZoomListeners} from './zoom.js';\nimport {isEscEvent} from '../utils/common.js';\nimport {DOM} from '../utils/DOM.js';\nimport {showSuccess} from '../utils/notification/success.js';\nimport {showError} from '../utils/notification/error.js';\n\nconst formElement = document.querySelector('.img-upload__form');\nconst editorElement = formElement.querySelector('.img-upload__overlay');\nconst closeButtonElement = formElement.querySelector('.img-upload__cancel');\n\nconst escPressHandler = (evt) => {\n  if (isEscEvent(evt.keyCode)) {\n    closeButtonClickHandler(); // eslint-disable-line no-use-before-define\n  }\n};\n\nconst closeButtonClickHandler = () => {\n  hideEditor(); // eslint-disable-line no-use-before-define\n};\n\nconst successHandler = () => {\n  showSuccess();\n  hideEditor(); // eslint-disable-line no-use-before-define\n};\n\nconst errorHandler = () => {\n  showError();\n  hideEditor(); // eslint-disable-line no-use-before-define\n};\n\nconst formSubmitHandler = (evt) => {\n  evt.preventDefault();\n\n  addPost(new FormData(formElement))\n    .then(successHandler)\n    .catch(errorHandler);\n};\n\nconst clearForm = () => {\n  clearInputs();\n  setDefaultFilter();\n  setDefaultZoomValue();\n};\n\nconst addListeners = () => {\n  setInputListeners();\n  setFilterListener();\n  setZoomListeners();\n  closeButtonElement.addEventListener('click', closeButtonClickHandler);\n  formElement.addEventListener('submit', formSubmitHandler);\n  document.addEventListener('keydown', escPressHandler);\n};\n\nconst removeListeners = () => {\n  removeInputListeners();\n  removeFilterListener();\n  removeZoomListeners();\n  closeButtonElement.removeEventListener('click', closeButtonClickHandler);\n  formElement.removeEventListener('submit', formSubmitHandler);\n  document.removeEventListener('keydown', escPressHandler);\n};\n\nconst hideEditor = () => {\n  clearForm();\n  DOM.unlockScroll();\n  DOM.hideElement(editorElement);\n  removeListeners();\n};\n\nexport const openEditor = () => {\n  DOM.lockScroll();\n  DOM.showElement(editorElement);\n  addListeners();\n};\n","import {openEditor} from './editor.js';\n\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst fileChooserElement = document.querySelector('.img-upload__start input[type=file]');\nconst previewElement = document.querySelector('.img-upload__preview img');\n\nfileChooserElement.addEventListener('change', (evt) => {\n  const file = evt.target.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((fileType) => fileName.endsWith(fileType));\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      previewElement.src = reader.result;\n      openEditor();\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","import {getPosts} from './api.js';\nimport {renderPhotos} from './gallery/gallery.js';\nimport './editor/file-chooser.js';\n\ngetPosts()\n  .then(renderPhotos);\n"],"sourceRoot":""}